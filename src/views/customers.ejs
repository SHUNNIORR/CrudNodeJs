
<%- include('partials/_header'); -%>

<div class="container">
    <div class="row mt-5">
        <div class="col-md-7">
            <table class="table table-bordered table-hover">
                <thead>
                    <th>Id</th>
                    <th>Nombre</th>
                    <th>Dirección</th>
                    <th>Telefono</th>
                    <th>Acciones</th>
                </thead>
                <tbody>
                    <% if(data){%>
                        <% for (var i=0; i<data.length; i++){ %>
                            <tr>
                                <td><%= data[i].id %></td>
                                <td><%= data[i].name %></td>
                                <td><%= data[i].address %></td>
                                <td><%= data[i].phone %></td>
                                <td>
                                    <div style="display: flex;">
                                        <a href="/delete/<%= data[i].id %>" class="btn btn-danger"><i class="fas fa-trash-alt"></i></a>
                                        <a href="/update/<%= data[i].id %>" class="btn btn-success"><i class="fas fa-user-edit"></i></a>
                                
                                    </div>
                                </td>
                            </tr>
                            
                            
                        <% } %>
                    <% } %>        
                </tbody>
            </table>
        </div>
        <div class="col-md-5">
           <div class="card">
                <div class="card-body">
                    <form id="formulario" action="/add" method="post">
                
                        <div class="form-group">
                            <input id="name" type="text" name="name" placeholder="Name" required class="form-control">
                        </div>
                        <div class="form-group">
                            <input type="text" name="address" placeholder="Address" required class="form-control">
                        </div>
                        <div class="form-group">
                            <input id="phone" type="text" name="phone" placeholder="Phone" required class="form-control">
                        </div>
                        <div class="form-group text-center">
                            <button id="boton" class="btn btn-primary bg-dark text-white " type="submit"  >GUARDAR</button>
                        </div>
                        <div id="errores">

                        </div>
                </form>
                </div>
           </div>
        </div>


    </div>
    
</div>
<script >
    console.log('HOLA MUNDO');
    const formulario= document.getElementById('formulario');
    const inputs = document.querySelectorAll('#formulario input');
    const boton=document.getElementById('boton');

    const expresiones = {
        usuario: /^[a-zA-Z0-9\_\-]{4,16}$/, // Letras, numeros, guion y guion_bajo
        nombre: /^[a-zA-ZÀ-ÿ\s]{1,40}$/, // Letras y espacios, pueden llevar acentos.
        password: /^.{4,12}$/, // 4 a 12 digitos.
        correo: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,
        telefono: /^\d{7,14}$/ // 7 a 14 numeros.
    }

inputs.forEach((input)=>{
    input.addEventListener('keyup',validarFormulario);
})    
formulario.addEventListener('submit',(e)=>{
    e.preventDefault();
});

function validarFormulario(e){
    switch(e.target.name){
        case "name":
            validarCampo(expresiones.nombre, e.target,'name');
        break;
        case "address":
        break;
        case "phone":
            validarCampo(expresiones.telefono, e.target,'phone');
        break;
    }
}
function validarCampo(expresion,input,campo){
    if(expresion.test(input.value)){
        console.log('correcto');
        boton.disabled=false;
       document.getElementById(`${campo}`).style.border="2px solid green";
       
    }else{
        console.log('incorrecto');
        boton.disabled=true;
        document.getElementById(`${campo}`).style.border="2px solid red";
       
    }
}
</script>


<%- include('partials/_footer'); -%>